## 第05章：node与后台交互数据

### 一、前后端数据交互演变过程

**使用后台模板绑定数据**

早起的web项目中，前端工程师主要负责网页重构和一些页面效果，页面制作完成之后将静态文件交给后台程序员，后台程序员将静态页面套入后台模板并绑定数据。

这种工作模式中，前端程序员的存在感是很低的，相对后台的薪资待遇也会低很多。而且这种工作模式有一个很大的弊端，就是前后端程序高度耦合，如果后台程序员在绑定数据的过程中出现问题，需要将代码提交给前端程序员处理。无形中增加了项目沟通成本，随着技术的发展，前后端分离的方案逐渐被大家广泛接受。

**前后端分离的优点**

在前后端分离的项目中，前后端定义统一的数据接口，前端不用关心后台的程序，后台也不用关心前端的程序，前端程序员可以直接通过接口获取数据并将数据更新到web页面中。前后端程序实现了解耦，前段后程序员的分工便得更加明确。

**分离之后引入的问题？**

前后端分离的项目还是有缺点的，首先这种架构下，页面首屏渲染会比较慢，因为在加载好html之后，还要额外通过ajax请求数据然后才能填充页面；此外，由于搜索引擎的爬虫无法爬下js异步渲染的数据，导致这样的页面，SEO会存在一定的问题。

**用node作为中间层**

为了克服上述方案的缺点，业界提出了使用node作为中间层的方案。在这种架构下，模板都放在node端，当用户发起请求时候，请求首先到达node端，然后node向后端请求数据，拿到数据后填充渲染html模板，然后再返还给用户。这个架构下，浏览器端和node端都由前端开发人员来负责，后端只需要处理业务逻辑并提供api接口，这样既实现了前后端分离，由解决了异步渲染中的种种问题。


### 二、使用node请求数据

本章我们主要使用node向真正的后台发送请求并获取数据，在真实的项目中，这里的后台可以是java、php、python等等任何一种后台语言，后台语言并不重要，node中间层只需要知道后台的接口就能成功获取数据。在本章中，真正的后台同样适用node来模拟。

在本章中，中间层的文件为mid.js，开启端口为3000，模拟的服务器是server.js文件，端口为8000。

首先我们需要下载express、request和body-parser模块。

``` bash
npm install express request body-parser
```

